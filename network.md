
大部分摘抄自：[【计算机网络】数据交换技术和多路复用技术的正（nao）确(can)打开方式](http://www.cnblogs.com/penghuwan/p/7686059.html)

### 交换的作用

数据交换是计算机网络中两个终端进行数据传输的方式，它又可以分成两种类型：电路交换和分组交换。很显然，问题的核心在于“交换”，那么我们首先要思考的是：交换的作用是什么？
 
“交换”的作用在于借助交换设备实现通信线路的复用
 
我们假设某个网络有n个终端，那么对于该网络最基本的要求是“这n个终端能互相通信”，也就是说这n个终端间各自都要拥有互相连接的线路，那么让我们来看看“无交换”和“有交换”的网络有什么区别

### “无交换”的网络

“无交换”也就是说没有交换设备的支持，这导致:任意一个终端都要和其他n-1个终端直接相连。根据数学公式我们可以知道，总共需要n(n-1)/2条通信线路

![Alt text](/images/2018/network02.png "无交换网络")

“需要的线路实在太多了！”，就算不太了解商业学的朋友大约也想得出：在“n”的值已经达到天文数字的今天，要搞定这n个终端的互相通信将会在线路建设上付出多么可怕的，难以承受的成本。

于是“交换”的意义就体现出来了

### “有交换”的网络

让我们在上面的场景中引入一台交换设备，情况就截然不同了，在这种情况下，实现n个终端的互相通信仅仅只需要n条线路。因为在n的值很大的时候, n(n-1)/2是远大于n的，所以，“交换”这一方式节约（复用）了相当一部分的线路资源

当然了，交换设备可不仅仅只有一台，而且类型也有许多种，由此引出了我们今天要介绍的两种不同的数据交换方式—— 电路交换和分组交换

![Alt text](/images/2018/network03.png "无交换网络")

### circuit-switched networks 线路（电路）交换

电路交换是最早出现的通信方式，例如我们的电话通信使用的就是电路交换

![Alt text](/images/2018/network04.png "电路交换")

电路交换的过程可分为三部分： 建立电路，传输数据和拆除电路

我们以上图为例：
 
1.建立电路

A和B要进行通信，首先A先发出呼叫请求信号，然后经由上述一系列的交换机，接通这条物理链路，再由B发出应答信号给A，这样，通信线路就接通了。从这开始，才允许进行数据传输

2.数据传输

建立电路阶段完成后，便进入了数据传输阶段。这时候：

A可以向B发送数据，B也可以向A发送数据，实现双工通信 \\
在AB通信期间，该条链路被AB所占有，任意部分的链路资源不能被其他终端所使用 \\

3. 拆除电路

数据传输结束后，拆除电路。这时候，AB之间的链路资源被重新分配了，不再被AB独占，可以被其他的终端建立的链路所使用

### packet-switched networks 包（分组）交换

和电路交换相对应的是分组交换
 
分组交换是以报文交换为基础的，所以分组交换其实也可以叫做“报文分组交换”。所以，先让我们来看看什么是报文交换吧：

*报文交换*

在传输数据的时候没有建立电路的过程，而是把发送的信息分成多个报文正文，例如一个JPEG图片或者一个MP3音频文件，同时加上发送端和接收端地址等信息使其成文一份报文。

![Alt text](/images/2018/network05.png "报文交换")

报文的传送过程依赖于“存储转发机制”， 从发送端开始，每经过一个交换机，该交换机的任务是：
 
1.接收完整的报文，然后对报文进行缓存，此即为“存储”
2.等到下一个交换机节点空闲的时候，再将该报文发送给下一个交换机，此即为“转发”
 
接收端会将各份报文按照原来的顺序组合，从而得到完整的数据

*分组交换*

![Alt text](/images/2018/network06.png "分组交换")

我们说过，分组交换是在报文交换的基础上实现的。分组交换其实就是把报文（Message）划分成更小的传输单元——分组（Packet）。除此之外，并无太大差异。或者可以说：报文交换和分组交换的差异就仅仅是数据单元的大小不同罢了

然而，这一点小小的不同，却大大改善了网络交换的性能

相比于普通的报文交换，分组交换有什么优势呢？

1. 基于存储转发机制，报文交换对交换机的存储容量的要求是很高的，而分组交换大大所要求的存储容量很小（因为单个分组比单个报文小很多）
2. 包含较短信息的分组在节点间传输速率高
3. 分组小，在传输的时候出错的概率小，出现差错时，只需重发一个分组，而无需重发整个报文，所以能够提高传输效率

### 多路复用技术

当传输介质的带宽超过了传输单个信号所需的带宽，人们就通过在一条介质上同时携带多个传输信号的方法来提高传输系统的利用率，这就是所谓的多路复用。多路复用技术能把多个信号组合在一条物理信号组合在一条物理信道上进行传输，使多个终端能共享信道资源，提高信道的利用率。

把线路比作道路，把不同的用户信号比作运输物资的车辆：

![Alt text](/images/2018/network07.png "多路复用")

### 电路交换网络中的多路复用

电路交换网络中主要采用的多路复用技术有两种： 时分多路复用（FDM）和频分多路复用（TDM）

![Alt text](/images/2018/network01.png "TDM & FDM")


这里接上前面所做的道路的比喻，如果把电路交换网络比作交通局的话，那么他们迫切需要解决的问题就是怎么划分信道的问题。
 
划分的依据就是：时间和频率

在时分多路中，虽然就某一时刻而言，信号不是多路复用的，但就某一时间段而言，信号仍然是多路复用的。
 
总结：时分多路和频分多路都是分割带宽，区别在于频分多路是连续得到部分带宽，时分多路是周期性地得到所有带宽。

### 分组交换网络中的多路复用

分组交换网络中的多路复用技术是“统计多路复用”，又叫做异步时分多路复用，它和时分多路复用类似，不同的信道是按时间片分配的，但统计多路复用的最大不同点是:它的时间片是动态分配大小的，而不是固定相等的长度，所以统计多路复用是一种根据用户实际需要动态分配线路资源的时分复用方法。

和“电路交换交通局”的交通政策相比，“分组交换交通局”制定的行车政策是：并不分配固定宽度和道数的车道，而由当前道路上的车辆数动态地决定每辆车占据的道路的宽度，如果“当前道路上只有一辆车”，那么整条道路都为这辆车所占据。（每个用户信号的数据传输速率最高可达到线路总的传输能力）

![Alt text](/images/2018/network08.png "统计多路复用")

### 电路交换和分组交换各自的优劣

#### 电路交换和分组交换在时延上的对比

“电路交换交通局”的争论议题在于“时延”

他们认为：分组交换因其端到端时延是变动和难以预测的（主要是排队时延），所以不适合实时服务（如电话）

什么是排队时延呢？
 
因为分组交换的存储转发机制，路由器需要检查分组首部并决定将该分组导向何处，这需要一定的处理时延，而如果在这段时间内有下一个分组到达路由器的话，那么这下一个分组则需要在排在队列中等待处理，这是分组的排队时延。
 
如果分组到达路由器时没有其他分组在传输的话，排队时延是0，但是，如果流量很大，有很多分组也在排队等待路由器处理的话，那么这个时候排队时延就非常客观了。
 
正因为网络流量的变化是难以预测的，所以分组交换的端到端时延也是变动和难以预测的
 
打个比方，如果把路由器比作收费站，收费站收路费的一系列的操作是“处理时延”，而你等你前面的车辆收完费开走的总时间就是“排队时延”，如果这时候车流量很大的话，你到达收费站的时候可能前面有很多辆也在等待收费的车辆，  单次的排队时延 × N多个收费站就会得到很长的一段时间，但如果当前车流量很少（假设就只有你这一辆车），那么这时候排队时延就为零，总而言之， 时延变动而难以预测
 
 
而对于电路交换而言，在电路建立后到拆除电路前，信号将一直稳定地传输，时延几乎是固定的

#### 电路交换和分组交换在效率上的对比

“分组交换交通局”的争论议题在于“效率”
 
“分组交换交通局”认为：电路交换的效率是非常低下的

原因可归结为两点：

1. 对于电路交换而言，建立电路后，在其静默期（不传输信号），所占据的链路资源也不能为其他连接所用，这是一种资源浪费
 
例如：在拨打电话的时候，即使中途停止讲话，链路资源也不会因此而被释放，除非主动挂断。所以“分组交换交通局”认为，电路交换的这种“占着茅坑不XX”，“在其位不谋其政”的作风问题，违反了勤俭节约的精神，背离了群众路线。
 
2. 电路交换的多路复用方式也同样存在资源浪费的问题，对于时分多路复用而言，单条信道所能分享的最大传输速率是受到时隙分配的限制的，同一线路下的某条信道不能利用该线路下其他空闲信道的资源
 
例如： 对某电路交换/时分多路的线路，其一帧包含10个时间片（时隙），假设当前线路的总传输速率是1M bps, 那么用户通过其中一条信道传输1M 的数据，所需的时间是10s，因为该用户信道所能分享到的传输速率是1M bps / 10  = 0.1M bps,。
 
请注意，即使其他9个时隙对应的信道都保持空闲（不产生数据）， 该用户信道的传输速率也不会超过0.1M bps, 这不意味着，我们不是白白浪费了0.9M bps的速率吗？这不同样犯了 “占着茅坑不XX”的错误吗？
 
而相对应的，分组交换却可以很好地解决上面所遇到的问题，因为分组交换网络采用的是统计多路复用，所以当其他9个时隙对应的信道都保持空闲（不产生数据）的时候， 活动用户的信道速率可达到1M bps, 将所有的资源都利用起来，这时候， 只要1s的时间就可以传输完毕了。
 
我们还是同样打个比方， 对电路交换而言，其时（频）分多路的复用方式就好比将一条道路提前用白线分割为一条条车道，那么某个车辆在车道A上行驶的时候，即使车道B和C上无车辆，它也不能跨过白线使用车道B和C的道路资源，而受到车道宽窄的限制，单位时间内的“货运量”也就受到了限制
 
而分组交换的统计多路复用则可以“尽可能地利用道路资源”

![Alt text](/images/2018/network09.png "复用对比")

### 两种数据交换技术的现状

在上面，“分组交换交通局”和“电路交换交通局”的那一番争论到底谁最终赢了呢？ 总体来说，大部分的人民群众都站在了分组交换这一边。现如今，我们的因特网和计算机网络都是采用分组交换的，而只有传统的电话网络采用的才是电路交换。